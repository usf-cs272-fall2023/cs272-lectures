Java Database Connectivity (JDBC)
=================================================

These demos illustrate basic concepts related to embedded Jetty and embedded Jetty and database connections using JDBC in Java.

## Lecture Resources

The following archived recordings of the lecture code may be useful:

  - [JDBC](https://docs.google.com/presentation/d/e/2PACX-1vTVzPbBtOzPowhYoshT3YdbHIzlTKHzfZxzOMJUziA3tXdMpVO2pyCGvcv_SJSjlfU0N4fSaoXNjIM6/pub?start=false&loop=false&delayms=3000) ([Video](https://usfca.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=0b85317c-d4ce-4823-bed2-aff00152f1dd))
  
The following archived recordings of the lecture code may be useful:

  - [Faculty Server Part 1 - Demo, HTML, and SQL](https://usfca.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=b8ba9664-3d5d-41be-95f5-aff00152f22c)
  - [Faculty Server Part 2 - DatabaseConnector.java](https://usfca.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=cc7f3942-5ad3-4a1f-9608-aff00152f2bf)
  - [Faculty Server Part 3 - FacultyServer.java](https://usfca.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=efe6dc8a-76c5-41b2-bd5a-aff00152f2ea)
  - [Faculty Server Part 4 - FacultyServlet.java](https://usfca.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=07a05d15-ed6b-4b77-9107-aff00152f354)

The recording transcripts are autogenerated. The recordings may differ slightly from the latest version of the associated slides and code.

### Configuration

Modify `database.properties` with your assigned `user###` MariaDB account and password. Create an SSH tunnel to forward anything sent to your port 3307 to our on-campus MariaDB database server port 3306 using this command in your terminal:

```
ssh username@stargate.cs.usfca.edu -L 3307:sql.cs.usfca.edu:3306
```

...where `username` is your CS username. You will be prompted for your CS password. You need to run this command BEFORE running the `FacultyServer` code.

If you have not yet loaded the the faculty tables, do so BEFORE running the `FacultyServer` code. After logging into `stargate` and a `vlab##` computer, log in to the database using this command:

```
mysql -h sql.cs.usfca.edu -u user### -D user### -p
```

...with your assigned MariaDB account and password. Then, run this `SOURCE` command to load the necessary tables:

```
SOURCE /home/public/cs272/sql/faculty.sql
```

If you see the error "Missing required faculty tables in database." when running the code, this step has not been properly completed.

### Security Notes

Nothing we do regarding security will be effective unless we also use encrypted communication between the client browser and the web server. For this, you should be using HTTPS instead of HTTP. See the [SecuredRedirectHandler](https://www.eclipse.org/jetty/documentation/jetty-11/programming-guide/index.html#pg-server-http-handler-use-util-secure-handler) section of the Jetty Programming Guide for configuration details.

Unless you are a security expert, I always recommend you use a package designed by security professionals for handling sensitive information (like username and passwords). However, there are some best practices guides out there. See the [OWASP Password Storage Cheat Sheet](https://github.com/OWASP/CheatSheetSeries/blob/master/cheatsheets/Password_Storage_Cheat_Sheet.md) for an example.

## Official Resources

The following official [Java Tutorials](http://docs.oracle.com/javase/tutorial/index.html) may be useful:

  - [The Java Tutorials â€“ Lesson: JDBC Basics](https://docs.oracle.com/javase/tutorial/jdbc/basics/index.html)

